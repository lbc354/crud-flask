{% extends 'base.html' %}

{% block title %}
  Cadastrar Autor
{% endblock %}

{% block content %}
  <h1>Cadastrar Autor</h1>

  <form action="/autor" method="post">
    <input type="text" id="nome" name="nome" placeholder="Nome" required />
    <input type="submit" value="Confirmar" />
  </form>

  <ul id="lista-autores"></ul>

  <script>
    fetch('/autores')
      .then((response) => response.json())
      .then((data) => {
        const lista = document.getElementById('lista-autores')
        if (data.length === 0) {
          lista.innerHTML = '<li>Nenhum autor encontrado.</li>'
        } else {
          data.forEach((item) => {
            const li = document.createElement('li')
            li.textContent = `${item.autor}`
            lista.appendChild(li)
          })
        }
      })
      .catch((error) => {
        console.error('Erro ao buscar autores:', error)
      })
  </script>
{% endblock %}
